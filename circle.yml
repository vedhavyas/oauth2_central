machine:
  environment:
    GO15VENDOREXPERIMENT: 1
    IMPORT_PATH: "github.com/vedhavyas/$CIRCLE_PROJECT_REPONAME"
    PROJECT_PATH: "/usr/local/go_workspace/src/$IMPORT_PATH"

dependencies:
  override:
    - sudo mkdir -p $PROJECT_PATH
    - sudo rsync -azC --delete ./ $PROJECT_PATH
    - cd $PROJECT_PATH; sudo make install

test:
  pre:
    - cd $PROJECT_PATH; sudo make lint

  override:
    - cd $PROJECT_PATH; sudo make test